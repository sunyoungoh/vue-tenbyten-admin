(function(t){function e(e){for(var s,a,o=e[0],d=e[1],l=e[2],c=0,p=[];c<o.length;c++)a=o[c],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(t[s]=d[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],s=!0,o=1;o<r.length;o++){var d=r[o];0!==i[d]&&(s=!1)}s&&(n.splice(e--,1),t=a(a.s=r[0]))}return t}var s={},i={app:0},n=[];function a(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=s,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/vue-tenbyten-admin/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=d;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);var s=r("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],a=(r("7998"),r("2877")),o={},d=Object(a["a"])(o,i,n,!1,null,null,null),l=d.exports,u=r("8c4f"),c=function(){var t=this,e=t._self._c;return e("section",{staticClass:"home"},[t._m(0),e("h2",[t._v("텐바이텐 어드민 주문관리")]),e("LoginForm"),e("OrderList")],1)},p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:r("cf05")}})])}],m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"input-item"},[e("label",{attrs:{for:"brandId"}},[t._v("brandId")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.brandId,expression:"brandId"}],attrs:{type:"text"},domProps:{value:t.brandId},on:{input:function(e){e.target.composing||(t.brandId=e.target.value)}}}),e("p",{staticClass:"error"},[t._v(t._s(t.brandIdError))])])]),e("div",{staticClass:"input-item"},[e("label",{attrs:{for:"apiKey"}},[t._v("apiKey")]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.apiKey,expression:"apiKey"}],attrs:{type:"password"},domProps:{value:t.apiKey},on:{input:function(e){e.target.composing||(t.apiKey=e.target.value)}}}),e("p",{staticClass:"error"},[t._v(t._s(t.apiKeyError))])])]),e("div",{staticClass:"btns_order"},[e("button",{staticClass:"btn-new-orders",on:{click:function(e){return t.getOrdersData("new-orders")}}},[t._v(" 신규 주문 조회 ")]),e("button",{staticClass:"btn-outline",on:{click:function(e){return t.getOrdersData("ready")}}},[t._v(" 배송 준비 중 조회 ")])])])},h=[],f={data(){return{apiKey:this.$store.state.apiKey,brandId:this.$store.state.brandId,apiKeyError:"",brandIdError:""}},methods:{inputEmptyCheck(){this.apiKey?this.apiKeyError="":this.apiKeyError="apiKey를 입력해주세요.",this.brandId?this.brandIdError="":this.brandIdError="brandId를 입력해주세요."},async getOrdersData(t){this.inputEmptyCheck(),""!==this.apiKey&&""!==this.brandId&&(this.$store.commit("setApiKey",this.apiKey),this.$store.commit("setBrandId",this.brandId),this.$store.commit("setClickedBtn",t),await this.$store.dispatch("getOrdersData"))}}},v=f,b=Object(a["a"])(v,m,h,!1,null,null,null),_=b.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order-list-container"},[0!==t.orderList.length?e("table",[e("tr",[e("th",[t._v("주문일")]),e("th",[t._v("주문자ID")]),e("th",[t._v("주문자")]),e("th",[t._v("상품명")]),e("th",[t._v("옵션")]),e("th",[t._v("주문메모")]),"ready"==this.$store.state.clickedBtn?e("th",[t._v("발송상태")]):t._e()]),t._l(t.orderList,(function(t,r){return e("OrderItem",{key:r,attrs:{item:t}})}))],2):t._e(),e("p",[t._v(t._s(this.$store.state.resultMsg))])])},y=[],O=function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v(t._s(t.orderDate))]),e("td",[t._v(t._s(t.item["UserId"]))]),e("td",[t._v(t._s(t.item["ordererName"]))]),e("td",[t._v(t._s(t.itemName))]),e("td",[t._v(t._s(t.itemOptionName))]),e("td",[t._v(t._s(t.item["details"][0]["RequireMemo"]))]),"ready"==this.$store.state.clickedBtn?e("td",{staticClass:"btns_post"},["none"==t.postResult?e("button",{on:{click:t.postOrder}},[t._v("발송하기")]):"complete"==t.postResult?e("button",{staticClass:"btn_post-complete"},[t._v(" 발송완료 ")]):"fail"==t.postResult?e("button",{staticClass:"btn_post-fail"},[t._v(" 발송실패 ")]):t._e()]):t._e()])},I=[],w=r("cee4"),K=r("2f62"),C=r("0e44");s["a"].use(K["a"]);var j=new K["a"].Store({plugins:[Object(C["a"])({paths:["apiKey","brandId"]})],state:{apiKey:"",brandId:"",clickedBtn:"",orderList:[],resultMsg:""},mutations:{setApiKey(t,e){t.apiKey=e},setBrandId(t,e){t.brandId=e},setClickedBtn(t,e){t.clickedBtn=e},setOrderList(t,e){t.orderList=e},clearOrderList(t){t.orderList=[]},setResultMsg(t,e){t.resultMsg=e},clearResultMsg(t){t.resultMsg}},actions:{async getOrdersData({commit:t,state:e}){t("clearOrderList"),t("clearResultMsg");let r=[],s="";try{"new-orders"==e.clickedBtn&&(r=await N()),"ready"==e.clickedBtn&&(r=await $()),0!==r.data.totalCount?(console.log(r.data.outPutValue),t("setOrderList",r.data.outPutValue)):s="new-orders"==e.clickedBtn?"신규 주문이 없습니다.":"배송 준비 중인 주문이 없습니다."}catch({response:r}){s=401==r.status?"권한이 없습니다.":"에러가 발생했습니다."}finally{t("setResultMsg",s)}}}});function x(t){return t.interceptors.request.use((function(t){return t.headers.Authorization="bearer "+j.state.apiKey,t}),(function(t){return Promise.reject(t)})),t.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),t}function k(){return w["a"].create({withCredentials:!0})}function M(){const t=w["a"].create({withCredentials:!0});return x(t)}const D=k(),L=M(),N=()=>L.get("/api/v2/orders",{params:{brandId:j.state.brandId,startdate:B(),enddate:E()}}),$=()=>L.get("/api/v2/orders/orderhistory",{params:{brandId:j.state.brandId,startdate:B(),enddate:E()}}),P=(t,e,r)=>D.get(`/mail/send/${t}/${e}/${r}`),R=(t,e)=>L.post("/v2/orders/orderconfirm",{orderSerial:t,detailIdx:e,songjangDiv:"97",songjangNo:"0"}),B=()=>{let t=new Date,e=t.getFullYear(),r=("0"+(1+t.getMonth())).slice(-2),s=("0"+t.getDate()).slice(-2)-3;return e+"-"+r+"-"+s},E=()=>{let t=new Date,e=t.getFullYear(),r=("0"+(1+t.getMonth())).slice(-2),s=("0"+t.getDate()).slice(-2);return e+"-"+r+"-"+s};var S={props:{item:{type:Object}},data(){return{postResult:"none"}},computed:{orderDate(){let t=this.item["orderDate"].split("-");return t[0].substr(2)+"/"+t[1]+"/"+t[2]},itemName(){let t=this.item["details"][0]["itemName"].indexOf("]"),e=this.item["details"][0]["itemName"].indexOf("굿");return this.item["details"][0]["itemName"].substring(t+2,e-1)},itemOptionName(){let t=this.item["details"][0]["itemOptionName"],e=this.item["details"][0]["itemOptionName"].indexOf("꼭");return-1!==e?this.item["details"][0]["itemOptionName"].substring(0,e-1):t}},methods:{async postOrder(){try{const e=await P(this.item["details"][0]["itemId"],this.itemOptionName,this.item["details"][0]["RequireMemo"]);if(200==e.status)try{await R(this.item["OrderSerial"],this.item["details"][0]["DetailIdx"]),this.postResult="complete"}catch(t){console.log(t.response.data.message),this.postResult="fail"}}catch(t){console.log(t),400==t.response.status&&(this.postResult="fail")}}}},F=S,q=Object(a["a"])(F,O,I,!1,null,null,null),A=q.exports,T={components:{OrderItem:A},computed:{orderList(){return this.$store.state.orderList}}},J=T,V=Object(a["a"])(J,g,y,!1,null,null,null),Y=V.exports,z={components:{LoginForm:_,OrderList:Y}},H=z,U=Object(a["a"])(H,c,p,!1,null,null,null),G=U.exports;s["a"].use(u["a"]);const Q=[{path:"/",name:"Home",component:G}],W=new u["a"]({mode:"history",base:"/vue-tenbyten-admin/",routes:Q});var X=W;s["a"].config.productionTip=!1,new s["a"]({router:X,store:j,render:t=>t(l)}).$mount("#app")},7998:function(t,e,r){"use strict";r("7d13")},"7d13":function(t,e,r){},cf05:function(t,e,r){t.exports=r.p+"img/logo.f40ed32d.png"}});
//# sourceMappingURL=app.a52b57f6.js.map